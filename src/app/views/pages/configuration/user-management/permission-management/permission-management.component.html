<kt-portlet>
	<kt-portlet-header title="مدیریت صلاحیت ها">
	</kt-portlet-header>
	<kt-portlet-body>
		<div class="kt-form">
			<form [formGroup]="searchForm" (ngSubmit)="save()">
				<div class="row">
					<div class="form-group col-md-4 row">
						<label class="col-md-4 col-form-label">صلاحیت</label>
						<div class="col-md-8">
							<ng-select [items]="rolesList" (change)="loadRolePages()" formControlName="roleId"
								[bindLabel]="'name'" [bindValue]="'id'" placeholder="انتخاب نماید">

							</ng-select>
							<span *ngIf="isControlHasError('roleId','required')" class="form-text text-danger">ضروری
								میباشد</span>
						</div>
					</div>
					<div class="form-group col-md-6 row">
						<label class="col-md-2 col-form-label">صفحه </label>
						<div class="col-md-10">
							<ng-select [items]="pagesList" formControlName="pageIds" [multiple]="true" bindLabel="title"
								bindValue="id" groupBy="parent" placeholder="انتخاب نماید">

							</ng-select>
						</div>
					</div>
					<div class="col-md-2 text-left">
						<button type="submit" class="btn btn-outline-primary">ثبت صفحه</button>
						<button type="button" class="btn btn-outline-primary" (click)="loadRolePagePermissions()">ثبت
							صلاحیت</button>
					</div>
				</div>
			</form>
		</div>
		<hr>
		<div class="row">
			<table class="table table-bordered table-hover">
				<thead>
					<tr>
						<th>شماره</th>
						<th>صلاحیت</th>
						<th>صفحه</th>
						<th>عملیات</th>
					</tr>
				</thead>
				<tbody>
					<tr *ngFor="let usr of permissionList; let i = index">
						<td>{{ i+1 }}</td>
						<td>{{ usr.role }}</td>
						<td>{{ usr.page }}</td>
						<td>
							<button type="button" class="btn btn-sm btn-outline-success" (click)="edit(usr.id)">تغیر
								صلاحیت</button>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</kt-portlet-body>
</kt-portlet>
<ng-template ktComponentHost>

</ng-template>